## recover id object

A command-line tool that implements the identity recovery. It generates recovery
requests, contacts the identity provider, and recovers the identity objects.

## Build

To build run `cargo build --release`. This produces the binary `target/release/recover-id-object`.

## Run

See `--help` for the list of all the options. The tool has two modes: `generate-secrets` and `recover-identity`.

### Generate secrets

`generate-secrets` generates secrets for the recovery requests based on a seed phrase, the identity provider index, and the identity index.
It outputs the secrets to standard output.

E.g.

```bash
recover-id-object generate-secrets --concordium-wallet <PATH_TO_SEED_PHRASE> --ip-index ... --id-index (* other args *)
```

### Recover identity

`recover-identity` recovers the identity objects based on either a seed phrase or the secrets generated by `generate-secrets` and writes the recovered identity object to a JSON file.

To recover with a seed phrase, run:

```bash
recover-id-object recover-identity --concordium-wallet <PATH_TO_SEED_PHRASE> --ip-index ... (* other args *)
```

To recover with the secrets generated by `generate-secrets`, run:

```bash
recover-id-object recover-identity --prf-key <PRF_KEY> --id-cred-sec <ID_CRED_SEC> --ip-index ... (* other args *)

```

### Network

Note the `network` argument for both commands. The key derivation differs on mainnet and testnet so a correct network must be used to successfully recover.
