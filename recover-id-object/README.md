## recover id object

A command-line tool that implements the identity recovery. It generates recovery
requests, contacts the identity provider, and recovers the identity objects.

## Build

To build run `cargo build --release`. This produces the binary `target/release/recover-id-object`.

## Run

See `--help` for the list of all the options. The tool has two modes: `generate-secrets` and `recover-identity`.

### Generate secrets

`generate-secrets` generates secrets for the recovery requests based on a seed phrase, the identity provider index, and the identity index.
It outputs the secrets to standard output.

E.g.

```bash
recover-id-object generate-secrets --concordium-api <NODE-ENDPOINT> --concordium-wallet <PATH_TO_SEED_PHRASE> --concordium-api <NODE-ENDPOINT> --ip-index <INDEX> --id-index <INDEX> --network <NETWORK>
```

### Recover identity

`recover-identity` recovers the identity objects based on either a seed phrase or the secrets generated by `generate-secrets` and writes the recovered identity object to a JSON file.

To recover with a seed phrase, run:

```bash
recover-id-object recover-identity --concordium-wallet <PATH_TO_SEED_PHRASE> --concordium-api <NODE-ENDPOINT>  --ip-index <INDEX> --network <NETWORK> --ip-info-url <IP-INFO-URL>
```

To recover with the secrets generated by `generate-secrets`, run:

```bash
recover-id-object recover-identity --concordium-api <NODE-ENDPOINT>  --prf-key <PRF_KEY> --id-cred-sec <ID_CRED_SEC> --ip-index <INDEX> --network <NETWORK> --ip-info-url <IP-INFO-URL>

```

### Network

Note the `network` argument for both commands. The key derivation differs on mainnet and testnet so a correct network must be used to successfully recover.
